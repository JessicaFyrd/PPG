/*
 * DSP.h
 *
 *  Created on: 10 Jun 2022
 *      Author: Jessica
 */

#ifndef SRC_DSP_H_
#define SRC_DSP_H_


//Includes ============================================================================================================================================
#include "main.h"
#include "arm_math.h"
#include "string.h"


//Enumeration types  ==================================================================================================================================
typedef enum
{
   DSP_OK = 0,
   DSP_ERROR = -1

} dsp_return_value_t;


/*===================================================================================================================================================*/
/*==================================================================Filtration=======================================================================*/
/*===================================================================================================================================================*/


//Variables ===========================================================================================================================================
#define NUMBER_COEFS              	5
#define NUMBER_STAGE              	1
#define BLOCK_SIZE            		20					//Must be the same as the watermark level for interruption
#define LENGTH_DATA 				200					//Must be equal to the sample rate/number of samples for average to obtain 1 seconde of data
#define LENGTH_DATA_10s 			10*LENGTH_DATA


//Functions  ==========================================================================================================================================
dsp_return_value_t DSP_INIT(void);
dsp_return_value_t IIR_filter(void);





/*===================================================================================================================================================*/
/*==============================================================Heart rate Calculation===============================================================*/
/*===================================================================================================================================================*/


//Variables ===========================================================================================================================================
#define SHIFT 20


//Functions  ==========================================================================================================================================
dsp_return_value_t DSP_INIT(void);
dsp_return_value_t IIR_filter(void);
dsp_return_value_t roll_buffer(void);
dsp_return_value_t auto_correlation(void);
float32_t heart_rate_calculation(void);


#endif /* SRC_DSP_H_ */
